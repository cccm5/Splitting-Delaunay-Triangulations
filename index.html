<!DOCTYPE html>
<meta charset="utf-8">

<head>
</head>

<body>
  <div class="border">
    <div style="text-align: center">
      <h1 class="title">Splitting Delaunay Triangulations</h1>
    </div>
    <div class="flex-container">
      <div class="interface">
        <button type=button class="button1">Run</button>
        <button type=button class="button2">Reset</button>
        <div class="slidecontainer">
          <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
        </div>
      </div>
      <div class="image">
        <svg width="960" height="500" class="boxed"></svg>
      </div>
    </div>
  </div>


<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://unpkg.com/delaunator@3.0.2/delaunator.js"></script>
<script>

var svg = d3.select("svg").on("touchmove mousemove", moved),
    width = +svg.attr("width"),
    height = +svg.attr("height");

var sites = d3.range(100)
    .map(function(d) { return [Math.random() * width, Math.random() * height]; });

var voronoi = d3.voronoi();

var triangle = svg.append("g")
    .attr("class", "triangles")
  .selectAll("path")
  .data(voronoi.triangles(sites))
  .enter().append("path")
    .call(redrawTriangle);

var link = svg.append("g")
    .attr("class", "links")
  .selectAll("line")
  .data(voronoi.links(sites))
  .enter().append("line")
    .call(redrawLink);

var site = svg.append("g")
    .attr("class", "sites")
  .selectAll("circle")
  .data(sites)
  .enter().append("circle")
    .attr("r", 2.5)
    .call(redrawSite);

function moved() {
  sites[0] = d3.mouse(this);
  redraw();
}

function redraw() {
  var diagram = voronoi(sites);
  triangle = triangle.data(diagram.triangles()), triangle.exit().remove();
  triangle = triangle.enter().append("path").merge(triangle).call(redrawTriangle);
  link = link.data(diagram.links()), link.exit().remove();
  link = link.enter().append("line").merge(link).call(redrawLink);
  site = site.data(sites).call(redrawSite);
}

function redrawTriangle(triangle) {
  triangle
      .classed("primary", function(d) { return d[0] === sites[0] || d[1] === sites[0] || d[2] === sites[0]; })
      .attr("d", function(d) { return "M" + d.join("L") + "Z"; });
}

function redrawLink(link) {
  link
      .classed("primary", function(d) { return d.source === sites[0] || d.target === sites[0]; })
      .attr("x1", function(d) { return d.source[0]; })
      .attr("y1", function(d) { return d.source[1]; })
      .attr("x2", function(d) { return d.target[0]; })
      .attr("y2", function(d) { return d.target[1]; });
}

function redrawSite(site) {
  site
      .attr("cx", function(d) { return d[0]; })
      .attr("cy", function(d) { return d[1]; });
}

</script>

<style>



.triangles {
  fill: none;
}

.links {
  stroke: #000;
}

.sites {
  fill: #000;
  stroke: #fff;
}

.triangles .primary {
  fill: #f00;
}

.links .primary {
  stroke: #fff;
}

.sites :first-child {
  fill: #fff;
}

.title {
  font-family: Arial;
}

.boxed {
  text-align: right;
  padding: 20px;
  border: 2px solid lightgrey;
  border-left: 0px;
  border-right: 0px;
  border-bottom: 0px;
  float: right;
  height: 500px;
  position: relative;
}


.image {
  background-color: white;
}

.interface {
  width: 100%;
    border: 2px solid lightgrey;
    padding: 30px;
    margin: 0px;
    text-align: center;
    border-left: 0px;
    border-bottom: 0px;
  position: relative;
}

.interface:after {
  content: '';
  display: block;
  position: absolute;
  height: 15px;
  width: 30px;
  top: 0px;
  right: -5px;
  border: 5px solid white;
}


.flex-container {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}


.button1 {
  background-color: #f44336; 
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
}

.button2 {
  background-color: #008CBA;
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
}

.slidecontainer {
  width: 100vh; 
  position: relative;
  top: 50%;
}

.slider {
  -webkit-appearance: none;  
  appearance: none;
  width: 100%; 
  height: 15px; 
  background: #d3d3d3; 
  outline: none;
  opacity: 0.7; 
  -webkit-transition: .2s; 
  transition: opacity .2s;
  
  top: 40%;
  transform: rotate(270deg);
}


.slider:hover {
  opacity: 1; 
}


.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  background: black;
  cursor: pointer;
}

.slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  background: black;
  cursor: pointer;
}

</style>

</body>
